{% extends 'MardrazeCoreBundle:Admin:base_admin.html.twig' %}

{% block sonata_page_content %}
    {{ parent() }}
    <div class="page-header">
        <h1>{{ 'Edycja plik√≥w konfiguracyjnych'|trans }}</h1>
    </div>
        <div class="row">
            <div class="col-md-2">
                <div>
                    {% for file in files %}
                        <a href="#" data-path="{{ file.path }}">{{ file.name }}</a>
                    {% endfor %}
                </div>
                <div>
                    <form method="post" action="">
                        <input type="text" name="new_file" class="form-control" value="" placeholder="{{ 'Nazwa strony'|trans }}"/>
                        <input type="submit" class="btn btn-success" value="{{ 'Nowa strona'|trans }}"/>
                    </form>
                </div>
            </div>
            <form method="post" action="">
                <input type="hidden" name="save[file]" id="save_file" value="{{ save_file }}" />
                <div class="col-md-10">
                    <div>
                        <textarea id="admin_static" class="ckeditor" name="save[content]">{{ save_content }}</textarea>
                    </div>
                    <div class="text-center">
                        <input type="submit" class="btn btn-success" value="{{ 'Zapisz'|trans }}" />
                    </div>
                </div>
            </form>
        </div>
        <script>
            $(document).ready(function(){
                $('a[data-path]').click(function(){
                    var that = this;
                    $.get('?get_content='+$(that).attr('data-path'), function(content){
                        $('#save_file').val($(that).attr('data-path'));
                        CKEDITOR.instances['admin_static'].setData(content);
                    });
                });
            });
        </script>

{% endblock %}